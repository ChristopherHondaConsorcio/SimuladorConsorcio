<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Consórcio Honda | Christopher Norat</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">

<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif; }
body { background:#f5f5f5; color:#111; }
/* (todo seu CSS permanece exatamente igual, removido aqui só pra encurtar a visualização) */
</style>
</head>

<body>

<!-- SEU SITE TODO PERMANECE IGUAL -->

<div class="simulador">
  <h2>Simule o valor de crédito desejado</h2>
  <!-- ALTERADO PARA TEXT -->
  <input type="text" id="valorDesejado" placeholder="Digite o valor desejado" />
  <button class="btn" onclick="simular()">Simular</button>
  <div class="resultado" id="resultado"></div>
</div>

<script>
const WHATS_NUMBER = '5541989045115';

const cartas = [
  {valor:62337, parcela:887.19},
  {valor:75063, parcela:1068.31},
  {valor:76189, parcela:1084.33},
  {valor:90042, parcela:1281.49},
  {valor:96968, parcela:1380.06},
  {valor:103895, parcela:1478.65},
  {valor:110126, parcela:1567.33},
  {valor:117747, parcela:1675.79},
  {valor:120100, parcela:1709.28},
  {valor:124673, parcela:1774.36}
];

function valorBRL(n){
  return n.toLocaleString('pt-BR', {minimumFractionDigits:2, maximumFractionDigits:2});
}

/* ===== CORREÇÃO PRINCIPAL ===== */
function converterNumeroBR(valor){
  if(!valor) return 0;

  return Number(
    valor
      .replace(/\s/g,'')     // remove espaços
      .replace(/\./g,'')     // remove pontos de milhar
      .replace(',', '.')     // troca vírgula por ponto
  );
}

function simular(){
  const input = document.getElementById("valorDesejado").value;
  const desejado = converterNumeroBR(input);
  const out = document.getElementById("resultado");

  if (isNaN(desejado) || desejado <= 0) {
    out.innerHTML = "Digite um valor válido.";
    return;
  }

  const n = cartas.length;
  let melhor = null;

  for (let i = 0; i < n; i++) {
    const soma = cartas[i].valor;
    const parcela = cartas[i].parcela;
    const dist = Math.abs(desejado - soma);
    if (!melhor || dist < melhor.dist) {
      melhor = { soma, parcela, combo: [i], dist };
    }
  }

  const itens = melhor.combo.map(idx => {
    const c = cartas[idx];
    return `<li>R$ ${valorBRL(c.valor)} (84x de R$ ${valorBRL(c.parcela)})</li>`;
  }).join("");

  out.innerHTML = `
    <div><strong>Opção de crédito mais próxima:</strong> R$ ${valorBRL(melhor.soma)}</div>
    <ul>${itens}</ul>
  `;
}
</script>

</body>
</html>
